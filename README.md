# Simple REST service witch SSL (JKS) & SpringBoot dedicated to dynamic client certificate selection

### Choices
* JDK 8
* SpringBoot v.1.5.2
* SSL based on Java Keystore

### About
This example project demonstrates how to use two-way SSL connection with multiple client certificates.

The SSL connection requires us to generate client and server keys and certificates. 
Server key/cert are stored in server keystore and client keys/certs are stored in server truststore. 
On client side it looks reversely. Server key/cert are stored inside client truststore and client keys/certs are stored in client keystore.
If you want you can keep both inside keystore, but recommended is to separate it's.

You shouldn't have the keystore/truststore inside your jar/war, they need to be located on the filesystem. 
This project keeps both inside resources directory but it's only for demonstration.

This implementation of SSL is based on Java Key Store repository (JKS).

More info is located in [client](https://github.com/dalgim/dynamic-cert-ssl-client) implementation for this simple service.

### How to use

First of all we must generate client and server certificates. Certificates will be generate using _keytool_ provided by JDK.
Certificates generated by the following commands will be also used in [client](https://github.com/dalgim/dynamic-cert-ssl-client) 

#### Step-by-step
Generate server keypair and put them into _.jks_ file
 ```sh
 keytool -genkeypair -alias serverkey -keyalg RSA -keypass password -keystore server-keystore.jks -storepass password
  ```
Export generated server certificate from created _server-keystore.jks_ into _.cer_ file
 ```sh
 keytool -exportcert -alias serverkey -file server-public.cer -keystore server-keystore.jks -storepass password
  ```
#### Inicjalizacja Keystore oraz Truststore - krok po kroku

keytool -genkeypair -alias serverkey -keyalg RSA -keypass password -keystore server-keystore.jks -storepass password
keytool -exportcert -alias serverkey -file server-public.cer -keystore server-keystore.jks -storepass password

cer1
keytool -genkeypair -alias clientkey1 -keyalg RSA -keypass password -keystore client-keystore.jks -storepass password
keytool -exportcert -alias clientkey1 -file client-public1.cer -keystore client-keystore.jks -storepass password
keytool -importcert -keystore server-truststore.jks -alias clientcert1 -file client-public1.cer -storepass password -noprompt

cer2
keytool -genkeypair -alias clientkey2 -keyalg RSA -keypass password -keystore client-keystore.jks -storepass password
keytool -exportcert -alias clientkey2 -file client-public2.cer -keystore client-keystore.jks -storepass password
keytool -importcert -keystore server-truststore.jks -alias clientcert2 -file client-public2.cer -storepass password -noprompt

cer3
keytool -genkeypair -alias clientkey3 -keyalg RSA -keypass password -keystore client-keystore.jks -storepass password
keytool -exportcert -alias clientkey3 -file client-public3.cer -keystore client-keystore.jks -storepass password
keytool -importcert -keystore server-truststore.jks -alias clientcert3 -file client-public3.cer -storepass password -noprompt
